<?xml version="1.0" encoding="UTF-8"?>
<foxml:digitalObject PID="demo:ItemFive"
  fedoraxsi:schemaLocation="info:fedora/fedora-system:def/foxml# http://www.fedora.info/definitions/1/0/foxml1-0.xsd"
  xmlns:fedoraxsi="http://www.w3.org/2001/XMLSchema-instance" 
  xmlns:foxml="info:fedora/fedora-system:def/foxml#">
  <foxml:objectProperties>
    <foxml:property NAME="http://www.w3.org/1999/02/22-rdf-syntax-ns#type" VALUE="FedoraObject"/>
    <foxml:property NAME="info:fedora/fedora-system:def/model#state" VALUE="Active"/>
    <foxml:property NAME="info:fedora/fedora-system:def/model#label" VALUE="OAI Example Item Five"/>
  </foxml:objectProperties>
  <foxml:datastream CONTROL_GROUP="X" ID="RELS-EXT" STATE="A" VERSIONABLE="true">
    <foxml:datastreamVersion ID="RELS-EXT.0" LABEL="Relationships and properties"
      MIMETYPE="text/xml">
      <foxml:xmlContent>
        <rdf:RDF xmlns:oai="http://www.openarchives.org/OAI/2.0/"
          xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:rel="info:fedora/fedora-system:def/relations-external#">
          <rdf:Description rdf:about="info:fedora/demo:ItemFive">
            <oai:itemID>oai:example.org:item5</oai:itemID>
            <rel:isMemberOf rdf:resource="info:fedora/demo:SetPrime"/>
            <rel:isMemberOf rdf:resource="info:fedora/demo:SetAboveTwoOdd"/>
          </rdf:Description>
        </rdf:RDF>
      </foxml:xmlContent>
    </foxml:datastreamVersion>
  </foxml:datastream>
  <foxml:datastream CONTROL_GROUP="X" ID="x-and-y-and-abouts.xml" STATE="A" VERSIONABLE="true">
    <foxml:datastreamVersion ID="x-and-y-and-abouts.xml.1"
      LABEL="Datastream that includes the x and y metadata (and abouts)" MIMETYPE="text/xml">
      <foxml:xmlContent>
        <all-data>
          <data format="x">
            <metadata>
              <x:xMetadata xmlns:x="urn:example:formats:x" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:example:formats:x http://example.org/x.xsd">
                <x:name>Item Five</x:name>
                <x:date>September, 2005</x:date>
              </x:xMetadata>
            </metadata>
            <abouts>
              <about>
                <my_about xmlns="urn:example:formats:my-about" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:example:formats:my-about http://example.org/my-about.xsd">
                  <category>item</category>
                  <firstCreated>2005-09-20T12:47:10.511</firstCreated>
                  <primaryIdentifier>http://example.org/item5.html</primaryIdentifier>
                </my_about>
              </about>
              <about>
                <provenance schemaVersion="1.01.000" xmlns="http://ns.nsdl.org/provenance_about_v1.01"
                  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://ns.nsdl.org/provenance_about_v1.01 http://ns.nsdl.org/schemas/provenance_about/provenance_about_v1.01.xsd">
                  <originDescription altered="true" harvestDate="2005-07-07T07:57:48Z">
                    <harvestType>OAI2.0</harvestType>
                    <dataSource public="true">http://example.org/oai</dataSource>
                    <identifier>oai:example.org:item5</identifier>
                    <datestamp>2004-03-02</datestamp>
                  </originDescription>
                </provenance>
              </about>
            </abouts>
          </data>
          <data format="y">
            <metadata>
              <y:yMetadata xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:y="urn:example:formats:y" xsi:schemaLocation="urn:example:formats:y http://example.org/y.xsd">
                <y:label>Item Number Five</y:label>
                <y:date>2005</y:date>
              </y:yMetadata>
            </metadata>
            <abouts>
              <about>
                <my_about xmlns="urn:example:formats:my-about" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="urn:example:formats:my-about http://example.org/my-about.xsd">
                  <category>item</category>
                  <firstCreated>2005-09-20T12:47:10.511</firstCreated>
                  <primaryIdentifier>http://example.org/item5.html</primaryIdentifier>
                </my_about>
              </about>
              <about>
                <provenance schemaVersion="1.01.000" xmlns="http://ns.nsdl.org/provenance_about_v1.01"
                  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://ns.nsdl.org/provenance_about_v1.01 http://ns.nsdl.org/schemas/provenance_about/provenance_about_v1.01.xsd">
                  <originDescription altered="true" harvestDate="2005-07-07T07:57:48Z">
                    <harvestType>OAI2.0</harvestType>
                    <dataSource public="true">http://example.org/oai</dataSource>
                    <identifier>oai:example.org:item5</identifier>
                    <datestamp>2004-03-02</datestamp>
                  </originDescription>
                </provenance>
              </about>
            </abouts>
          </data>
        </all-data>
      </foxml:xmlContent>
    </foxml:datastreamVersion>
  </foxml:datastream>
  <foxml:datastream CONTROL_GROUP="X" ID="DC" STATE="A" VERSIONABLE="true">
    <foxml:datastreamVersion ID="DC1.0" LABEL="Dublin Core Metadata" MIMETYPE="text/xml">
      <foxml:xmlContent>
        <oai_dc:dc xmlns:dc="http://purl.org/dc/elements/1.1/" xmlns:oai_dc="http://www.openarchives.org/OAI/2.0/oai_dc/">
          <dc:title>OAI Example Item Five</dc:title>
          <dc:identifier>demo:ItemFive</dc:identifier>
        </oai_dc:dc>
      </foxml:xmlContent>
    </foxml:datastreamVersion>
  </foxml:datastream>
  <foxml:datastream CONTROL_GROUP="X" ID="extract.xsl" STATE="A" VERSIONABLE="true">
    <foxml:datastreamVersion ID="extract.xsl.12" LABEL="Stylesheet to extract metadata (or abouts) of interest" MIMETYPE="text/xml">
      <foxml:xmlContent>
        <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
          <xsl:param name="format"/>
          <xsl:param name="about"/>
          <xsl:output media-type="text/xml" method="xml"/>
          <xsl:template match="/all-data">
            <xsl:for-each select="/all-data/data[@format=$format]">
              <xsl:choose>
                <xsl:when test="$about='true'">
                  <xsl:apply-templates select="abouts"/>
                </xsl:when>
                <xsl:otherwise>
                  <xsl:apply-templates select="metadata/node()"/>
                </xsl:otherwise>
              </xsl:choose>
            </xsl:for-each>
          </xsl:template>
          <xsl:template match="@*|node()">
            <xsl:copy>
              <xsl:apply-templates select="@*|node()"/>
            </xsl:copy>
          </xsl:template>
        </xsl:stylesheet>
      </foxml:xmlContent>
    </foxml:datastreamVersion>
  </foxml:datastream>
  <foxml:disseminator BDEF_CONTRACT_PID="demo:XYFormatsBDef" ID="DISS1" STATE="A" VERSIONABLE="true">
    <foxml:disseminatorVersion BMECH_SERVICE_PID="demo:XYFormatsBMech" ID="DISS1.0" LABEL="Enter a label here.">
      <foxml:serviceInputMap>
        <foxml:datastreamBinding DATASTREAM_ID="x-and-y-and-abouts.xml" KEY="SOURCE"
          LABEL="Binding to Datastream that includes the x and y metadata (and abouts)" ORDER="0"/>
        <foxml:datastreamBinding DATASTREAM_ID="extract.xsl" KEY="STYLE"
          LABEL="Binding to Stylesheet to extract metadata (or abouts) of interest" ORDER="0"/>
      </foxml:serviceInputMap>
    </foxml:disseminatorVersion>
  </foxml:disseminator>
</foxml:digitalObject>